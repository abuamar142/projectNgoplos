<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Login Failed</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/stylee.css') }}"
    />
  </head>
  <body>
    <div id="error-page">
      <div class="content">
        <img src="{{ url_for('static', filename='img/2953962.jpg') }}" />
        <div class="row justify-content-center">
          <div class="col-md-4 text-center mt-3 mb-3">
            {% with messages = get_flashed_messages(with_categories=true) %} {%
            if messages %} {% for category, message in messages %}
            <!-- alert -->
            <div
              class="alert alert-{{ category }} alert-dismissible fade show"
              role="alert"
            >
              <strong>{{ message }}</strong>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="alert"
                aria-label="Close"
              ></button>
            </div>
            {% endfor %} {% endif %} {% endwith %}
          </div>
        </div>
        <p>
          username yang Anda pilih sudah tersedia. Silakan pilih password yang
          berbeda untuk menyelesaikan proses registrasi Anda
        </p>
        <div class="btns">
          <a href="/">Kembali ke Home</a>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Ambil pesan Flash Flask dari template HTML
        var errorMessage =
          "{% with messages = get_flashed_messages(with_categories=true) %}{% if messages %}{% for category, message in messages %}{% if category == 'danger' %}{{ message }}{% endif %}{% endfor %}{% endif %}{% endwith %}";

        // Tampilkan pesan Flash Flask dalam SweetAlert2
        if (errorMessage) {
          Swal.fire({
            title: "Registrasi Gagal!",
            text: errorMessage,
            icon: "error",
            confirmButtonText: "OK",
          });
        }
      });
    </script>

    <script src="{{ url_for('static', filename='js/sweetalert2.all.min.js') }}"></script>
  </body>
</html>
